"use strict";var GameEngineComponent=(()=>{var h=Object.create;var p=Object.defineProperty;var P=Object.getOwnPropertyDescriptor;var E=Object.getOwnPropertyNames;var D=Object.getPrototypeOf,C=Object.prototype.hasOwnProperty;var j=(t,e)=>()=>(e||t((e={exports:{}}).exports,e),e.exports),L=(t,e)=>{for(var o in e)p(t,o,{get:e[o],enumerable:!0})},b=(t,e,o,r)=>{if(e&&typeof e=="object"||typeof e=="function")for(let n of E(e))!C.call(t,n)&&n!==o&&p(t,n,{get:()=>e[n],enumerable:!(r=P(e,n))||r.enumerable});return t};var S=(t,e,o)=>(o=t!=null?h(D(t)):{},b(e||!t||!t.__esModule?p(o,"default",{value:t,enumerable:!0}):o,t)),N=t=>b(p({},"__esModule",{value:!0}),t);var M=j((Q,w)=>{"use strict";var m=Object.defineProperty,B=Object.getOwnPropertyDescriptor,R=Object.getOwnPropertyNames,V=Object.prototype.hasOwnProperty,$=(t,e)=>{for(var o in e)m(t,o,{get:e[o],enumerable:!0})},T=(t,e,o,r)=>{if(e&&typeof e=="object"||typeof e=="function")for(let n of R(e))!V.call(t,n)&&n!==o&&m(t,n,{get:()=>e[n],enumerable:!(r=B(e,n))||r.enumerable});return t},A=t=>T(m({},"__esModule",{value:!0}),t),g={};$(g,{BotOutcome:()=>W,ParseMoveError:()=>G,createTemplate:()=>I,defineConfig:()=>F,file:()=>d});w.exports=A(g);var W={Victory:"Victory",Defeat:"Defeat",Draw:"Draw",Error:"Error",None:"None"};function F(t){return t}var G=class extends Error{};function v(t=644){return(e,...o)=>{let r="";e.forEach((s,i)=>{r+=s+(o[i]??"")});let n=r.split(`
`);for(;n[0]?.trim()==="";)n.shift();let a=n[0]?.match(/^\s+/)?.[0]??"";return{contents:n.map(s=>s.startsWith(a)?s.slice(a.length):s).join(`
`),mode:t}}}var d=v();d.mode=t=>v(t);d.executable=v(755);function I(t){return t}});var H={};L(H,{play:()=>k});var c=S(M());async function*k(t){let e=t.config.startingPosition;yield e;let o=0;for(;;){let r=z(e)?.outcome??null;if(r!==null)return r;let n=o%2===0?0:1,a=t.bots[n],s=q(e),i=await a.move(s).then(J);a.writeln(`\u2937 x=${i.x} y=${i.y}`);let l=e.board[i.x][i.y];if(typeof l=="number")return e.board[i.x][i.y]=[l,o],a.writeln(`Spot { x: ${i.x}, y: ${i.y} } already occupied.`),yield e,[n===0?c.BotOutcome.Error:c.BotOutcome.None,n===1?c.BotOutcome.Error:c.BotOutcome.None];e.board[i.x][i.y]=o,yield e,o++}}function J(t){let[e,o]=t.split(",").map(r=>{if(/(0|1|2)/.test(r))return parseInt(r)});if(e===void 0||o===void 0)throw new Error(`Response invalid: "${t}"`);return{x:e,y:o}}function q(t){return t.board.map(o=>o.map(r=>r===null?"empty":(Array.isArray(r)?r[0]%2===0:r%2===0)?"x":"o")).map(o=>o.join(",")).join("|")}function z(t){let e={x:0,y:0},o={x:0,y:1},r={x:0,y:2},n={x:1,y:0},a={x:1,y:1},s={x:1,y:2},i={x:2,y:0},l={x:2,y:1},y={x:2,y:2},_=[[e,o,r],[n,a,s],[i,l,y],[e,n,i],[o,a,l],[r,s,y],[e,a,y],[i,a,r]];for(let u of[0,1]){let f=_.find(O=>O.every(x=>t.board[x.x][x.y]===u));if(f)return{winningLine:f,outcome:[u===0?c.BotOutcome.Victory:c.BotOutcome.Defeat,u===1?c.BotOutcome.Victory:c.BotOutcome.Defeat]}}for(let u=0;u<3;u++)for(let f=0;f<3;f++)if(t.board[u][f]===null)return null;return{outcome:[c.BotOutcome.Draw,c.BotOutcome.Draw]}}return N(H);})();
