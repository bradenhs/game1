"use strict";var GameEngineComponent=(()=>{var h=Object.create;var p=Object.defineProperty;var P=Object.getOwnPropertyDescriptor;var D=Object.getOwnPropertyNames;var C=Object.getPrototypeOf,j=Object.prototype.hasOwnProperty;var E=(t,e)=>()=>(e||t((e={exports:{}}).exports,e),e.exports),L=(t,e)=>{for(var o in e)p(t,o,{get:e[o],enumerable:!0})},b=(t,e,o,n)=>{if(e&&typeof e=="object"||typeof e=="function")for(let r of D(e))!j.call(t,r)&&r!==o&&p(t,r,{get:()=>e[r],enumerable:!(n=P(e,r))||n.enumerable});return t};var S=(t,e,o)=>(o=t!=null?h(C(t)):{},b(e||!t||!t.__esModule?p(o,"default",{value:t,enumerable:!0}):o,t)),N=t=>b(p({},"__esModule",{value:!0}),t);var _=E((K,w)=>{"use strict";var m=Object.defineProperty,B=Object.getOwnPropertyDescriptor,R=Object.getOwnPropertyNames,V=Object.prototype.hasOwnProperty,$=(t,e)=>{for(var o in e)m(t,o,{get:e[o],enumerable:!0})},T=(t,e,o,n)=>{if(e&&typeof e=="object"||typeof e=="function")for(let r of R(e))!V.call(t,r)&&r!==o&&m(t,r,{get:()=>e[r],enumerable:!(n=B(e,r))||n.enumerable});return t},A=t=>T(m({},"__esModule",{value:!0}),t),g={};$(g,{BotOutcome:()=>W,createTemplate:()=>G,defineConfig:()=>F,file:()=>v});w.exports=A(g);var W={Victory:"Victory",Defeat:"Defeat",Draw:"Draw",Error:"Error",None:"None"};function F(t){return t}function d(t=644){return(e,...o)=>{let n="";e.forEach((s,i)=>{n+=s+(o[i]??"")});let r=n.split(`
`);for(;r[0]?.trim()==="";)r.shift();let a=r[0]?.match(/^\s+/)?.[0]??"";return{contents:r.map(s=>s.startsWith(a)?s.slice(a.length):s).join(`
`),mode:t}}}var v=d();v.mode=t=>d(t);v.executable=d(755);function G(t){return t}});var z={};L(z,{play:()=>I});var c=S(_());async function*I(t){let e=t.config.startingPosition;yield e;let o=0;for(;;){let n=q(e)?.outcome??null;if(n!==null)return n;let r=o%2===0?0:1,a=t.bots[r],s=J(e),i=await a.move(s).then(k);a.writeln(`\u2937 x=${i.x} y=${i.y}`);let l=e.board[i.x][i.y];if(typeof l=="number")return e.board[i.x][i.y]=[l,o],a.writeln(`Spot { x: ${i.x}, y: ${i.y} } already occupied.`),yield e,[r===0?c.BotOutcome.Error:c.BotOutcome.None,r===1?c.BotOutcome.Error:c.BotOutcome.None];e.board[i.x][i.y]=o,yield e,o++}}function k(t){let[e,o]=t.split(",").map(n=>{if(/(0|1|2)/.test(n))return parseInt(n)});if(e===void 0||o===void 0)throw new Error(`Response invalid: "${t}"`);return{x:e,y:o}}function J(t){return t.board.map(o=>o.map(n=>n===null?"empty":(Array.isArray(n)?n[0]%2===0:n%2===0)?"x":"o")).map(o=>o.join(",")).join("|")}function q(t){let e={x:0,y:0},o={x:0,y:1},n={x:0,y:2},r={x:1,y:0},a={x:1,y:1},s={x:1,y:2},i={x:2,y:0},l={x:2,y:1},y={x:2,y:2},M=[[e,o,n],[r,a,s],[i,l,y],[e,r,i],[o,a,l],[n,s,y],[e,a,y],[i,a,n]];for(let u of[0,1]){let f=M.find(O=>O.every(x=>t.board[x.x][x.y]===u));if(f)return{winningLine:f,outcome:[u===0?c.BotOutcome.Victory:c.BotOutcome.Defeat,u===1?c.BotOutcome.Victory:c.BotOutcome.Defeat]}}for(let u=0;u<3;u++)for(let f=0;f<3;f++)if(t.board[u][f]===null)return null;return{outcome:[c.BotOutcome.Draw,c.BotOutcome.Draw]}}return N(z);})();
