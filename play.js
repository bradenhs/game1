"use strict";var GameEngineComponent=(()=>{var _=Object.create;var f=Object.defineProperty;var O=Object.getOwnPropertyDescriptor;var P=Object.getOwnPropertyNames;var E=Object.getPrototypeOf,D=Object.prototype.hasOwnProperty;var C=(o,e)=>()=>(e||o((e={exports:{}}).exports,e),e.exports),h=(o,e)=>{for(var t in e)f(o,t,{get:e[t],enumerable:!0})},d=(o,e,t,r)=>{if(e&&typeof e=="object"||typeof e=="function")for(let n of P(e))!D.call(o,n)&&n!==t&&f(o,n,{get:()=>e[n],enumerable:!(r=O(e,n))||r.enumerable});return o};var j=(o,e,t)=>(t=o!=null?_(E(o)):{},d(e||!o||!o.__esModule?f(t,"default",{value:o,enumerable:!0}):t,o)),L=o=>d(f({},"__esModule",{value:!0}),o);var g=C((H,b)=>{"use strict";var m=Object.defineProperty,S=Object.getOwnPropertyDescriptor,N=Object.getOwnPropertyNames,B=Object.prototype.hasOwnProperty,V=(o,e)=>{for(var t in e)m(o,t,{get:e[t],enumerable:!0})},R=(o,e,t,r)=>{if(e&&typeof e=="object"||typeof e=="function")for(let n of N(e))!B.call(o,n)&&n!==t&&m(o,n,{get:()=>e[n],enumerable:!(r=S(e,n))||r.enumerable});return o},$=o=>R(m({},"__esModule",{value:!0}),o),x={};V(x,{BotOutcome:()=>A,ParseMoveError:()=>I,defineConfig:()=>G});b.exports=$(x);var A={Victory:"Victory",Defeat:"Defeat",Draw:"Draw",Error:"Error",None:"None"};function G(o){return o}var I=class extends Error{}});var z={};h(z,{play:()=>k});var i=j(g());async function*k(o){let e={board:[[null,null,null],[null,null,null],[null,null,null]]};yield e;let t=0;for(;;){let r=t%2===0?0:1,n=o.bots[r],s=W(e),a=await n.move(s).then(J);n.writeln(`\u2937 x=${a.x} y=${a.y}`);let u=e.board[a.x][a.y];if(typeof u=="number")return e.board[a.x][a.y]=[u,t],n.writeln(`Spot { x: ${a.x}, y: ${a.y} } already occupied.`),yield e,[r===0?i.BotOutcome.Error:i.BotOutcome.None,r===1?i.BotOutcome.Error:i.BotOutcome.None];e.board[a.x][a.y]=t,yield e;let y=q(e)?.outcome??null;if(y!==null)return y;t++}}function J(o){let[e,t]=o.split(",").map(r=>{if(/(0|1|2)/.test(r))return parseInt(r)});if(e===void 0||t===void 0)throw new i.ParseMoveError;return{x:e,y:t}}function W(o){return o.board.map(t=>t.map(r=>r===null?"empty":(Array.isArray(r)?r[0]%2===0:r%2===0)?"x":"o")).map(t=>t.join(",")).join("|")}function q(o){let e={x:0,y:0},t={x:0,y:1},r={x:0,y:2},n={x:1,y:0},s={x:1,y:1},a={x:1,y:2},u={x:2,y:0},y={x:2,y:1},p={x:2,y:2},M=[[e,t,r],[n,s,a],[u,y,p],[e,n,u],[t,s,y],[r,a,p],[e,s,p],[u,s,r]];for(let c of[0,1]){let l=M.find(w=>w.every(v=>o.board[v.x][v.y]===c));if(l)return{winningLine:l,outcome:[c===0?i.BotOutcome.Victory:i.BotOutcome.Defeat,c===1?i.BotOutcome.Victory:i.BotOutcome.Defeat]}}for(let c=0;c<3;c++)for(let l=0;l<3;l++)if(o.board[c][l]===null)return null;return{outcome:[i.BotOutcome.Draw,i.BotOutcome.Draw]}}return L(z);})();
