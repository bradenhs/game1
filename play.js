"use strict";var GameEngineComponent=(()=>{var h=Object.create;var p=Object.defineProperty;var P=Object.getOwnPropertyDescriptor;var E=Object.getOwnPropertyNames;var D=Object.getPrototypeOf,C=Object.prototype.hasOwnProperty;var j=(t,e)=>()=>(e||t((e={exports:{}}).exports,e),e.exports),L=(t,e)=>{for(var o in e)p(t,o,{get:e[o],enumerable:!0})},b=(t,e,o,r)=>{if(e&&typeof e=="object"||typeof e=="function")for(let n of E(e))!C.call(t,n)&&n!==o&&p(t,n,{get:()=>e[n],enumerable:!(r=P(e,n))||r.enumerable});return t};var S=(t,e,o)=>(o=t!=null?h(D(t)):{},b(e||!t||!t.__esModule?p(o,"default",{value:t,enumerable:!0}):o,t)),N=t=>b(p({},"__esModule",{value:!0}),t);var M=j((Q,w)=>{"use strict";var m=Object.defineProperty,B=Object.getOwnPropertyDescriptor,V=Object.getOwnPropertyNames,R=Object.prototype.hasOwnProperty,T=(t,e)=>{for(var o in e)m(t,o,{get:e[o],enumerable:!0})},$=(t,e,o,r)=>{if(e&&typeof e=="object"||typeof e=="function")for(let n of V(e))!R.call(t,n)&&n!==o&&m(t,n,{get:()=>e[n],enumerable:!(r=B(e,n))||r.enumerable});return t},A=t=>$(m({},"__esModule",{value:!0}),t),g={};T(g,{BotOutcome:()=>W,ParseMoveError:()=>G,createTemplate:()=>I,defineConfig:()=>F,file:()=>d});w.exports=A(g);var W={Victory:"Victory",Defeat:"Defeat",Draw:"Draw",Error:"Error",None:"None"};function F(t){return t}var G=class extends Error{};function v(t=644){return(e,...o)=>{let r="";e.forEach((a,s)=>{r+=a+(o[s]??"")});let n=r.split(`
`);for(;n[0]?.trim()==="";)n.shift();let c=n[0]?.match(/^\s+/)?.[0]??"";return{contents:n.map(a=>a.startsWith(c)?a.slice(c.length):a).join(`
`),mode:t}}}var d=v();d.mode=t=>v(t);d.executable=v(755);function I(t){return t}});var H={};L(H,{play:()=>k});var i=S(M());async function*k(t){let e={board:[[null,null,null],[null,null,null],[null,null,null]]};yield e;let o=0;for(;;){let r=o%2===0?0:1,n=t.bots[r],c=q(e),a=await n.move(c).then(J);n.writeln(`\u2937 x=${a.x} y=${a.y}`);let s=e.board[a.x][a.y];if(typeof s=="number")return e.board[a.x][a.y]=[s,o],n.writeln(`Spot { x: ${a.x}, y: ${a.y} } already occupied.`),yield e,[r===0?i.BotOutcome.Error:i.BotOutcome.None,r===1?i.BotOutcome.Error:i.BotOutcome.None];e.board[a.x][a.y]=o,yield e;let f=z(e)?.outcome??null;if(f!==null)return f;o++}}function J(t){let[e,o]=t.split(",").map(r=>{if(/(0|1|2)/.test(r))return parseInt(r)});if(e===void 0||o===void 0)throw new i.ParseMoveError;return{x:e,y:o}}function q(t){return t.board.map(o=>o.map(r=>r===null?"empty":(Array.isArray(r)?r[0]%2===0:r%2===0)?"x":"o")).map(o=>o.join(",")).join("|")}function z(t){let e={x:0,y:0},o={x:0,y:1},r={x:0,y:2},n={x:1,y:0},c={x:1,y:1},a={x:1,y:2},s={x:2,y:0},f={x:2,y:1},y={x:2,y:2},_=[[e,o,r],[n,c,a],[s,f,y],[e,n,s],[o,c,f],[r,a,y],[e,c,y],[s,c,r]];for(let l of[0,1]){let u=_.find(O=>O.every(x=>t.board[x.x][x.y]===l));if(u)return{winningLine:u,outcome:[l===0?i.BotOutcome.Victory:i.BotOutcome.Defeat,l===1?i.BotOutcome.Victory:i.BotOutcome.Defeat]}}for(let l=0;l<3;l++)for(let u=0;u<3;u++)if(t.board[l][u]===null)return null;return{outcome:[i.BotOutcome.Draw,i.BotOutcome.Draw]}}return N(H);})();
